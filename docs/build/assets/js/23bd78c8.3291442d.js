"use strict";(self.webpackChunk_notemine_docs=self.webpackChunk_notemine_docs||[]).push([[552],{40:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>m,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var r=s(2540),i=s(3023);const t={},o="@notemine/wrapper",c={id:"packages/wrapper",title:"@notemine/wrapper",description:"npm",source:"@site/docs/packages/wrapper.md",sourceDirName:"packages",slug:"/packages/wrapper",permalink:"/packages/wrapper",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"@notemine/svelte",permalink:"/packages/svelte"}},a={},l=[{value:"install",id:"install",level:2},{value:"usage",id:"usage",level:2},{value:"build",id:"build",level:2},{value:"install build deps",id:"install-build-deps",level:3},{value:"build wasm",id:"build-wasm",level:3},{value:"build package",id:"build-package",level:3},{value:"test",id:"test",level:3}];function d(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...n.components},{Details:s}=e;return s||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"noteminewrapper",children:"@notemine/wrapper"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"https://www.npmjs.com/package/notemine",children:(0,r.jsx)(e.img,{src:"https://img.shields.io/npm/v/notemine",alt:"npm"})}),"\n",(0,r.jsx)(e.a,{href:"https://github.com/sandwichfarm/notemine-js/actions/workflows/build.yaml",children:(0,r.jsx)(e.img,{src:"https://github.com/sandwichfarm/notemine-js/actions/workflows/build.yaml/badge.svg",alt:"build"})}),"\n",(0,r.jsx)(e.a,{href:"https://github.com/sandwichfarm/notemine-js/actions/workflows/test.yaml",children:(0,r.jsx)(e.img,{src:"https://github.com/sandwichfarm/notemine-js/actions/workflows/test.yaml/badge.svg",alt:"test"})})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@notemine/wrapper"})," is a typescript module that wraps ",(0,r.jsx)(e.a,{href:"https://github.com/sandwichfarm/notemine",children:"notemine"})," ",(0,r.jsx)(e.code,{children:"wasm-bindgen"})," interfaces. More convenient and has added observables for more consistent use throughout modern web stacks."]}),"\n",(0,r.jsx)(e.h2,{id:"install",children:"install"}),"\n",(0,r.jsxs)(e.p,{children:["package name: ",(0,r.jsx)(e.code,{children:"@notemine/wrapper"})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"npm"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  npm install @notemine/wrapper\n"})}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"pnpm"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  pnpm install @notemine/wrapper\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"yarn"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  yarn install @notemine/wrapper\n"})})]}),"\n",(0,r.jsx)(e.h2,{id:"usage",children:"usage"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.em,{children:"untested"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:'  import Notemine from "@notemine/wrapper"\n\n  //prepare meta for event \n  const content = "hello world."\n  const tags = [ "#t", "introduction"]\n  const pubkey = "e771af0b05c8e95fcdf6feb3500544d2fb1ccd384788e9f490bb3ee28e8ed66f"\n\n  //set options for notemine \n  const difficulty = 21\n  const numberOfWorkers = 7\n \n\n  const notemine = new Notemine({\n    content,\n    tags,\n    difficulty,\n    numberOfWorkers    \n  })\n\n  //you can also set content, tags and pubkey via assessors after initialization. \n  notemine.pubkey = pubkey\n\n  //start notemine\n  notemine.mine()\n'})}),"\n",(0,r.jsx)(e.p,{children:"Updates to notemine can be accessed via observables."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"notemine.progress$\nnotemine.error$\nnotemine.cancelled$\nnotemine.success$\n"})}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"svelte"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-svelte",children:"<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { type Writable, writable } from 'svelte/store';\n  import { type ProgressEvent, Notemine } from '@notemine/wrapper';\n\n\n  const numberOfMiners = 8\n  let notemine: Notemine;\n  let progress: Writable<ProgressEvent[]> = new writable(new Array(numberOfMiners))\n  let success: Writeable<SuccessEvent> = new writable(null)\n\n  onMount(() => {\n    notemine = new Notemine({ content: 'Hello, Nostr!', numberOfMiners  });\n\n    const progress$ = miner.progress$.subscribe(progress_ => {\n      progress.update( _progress => {\n        _progress[progress_.workerId] = progress_\n        return _progress\n      })\n    });\n\n    const success$ = miner.progress$.subscribe(success_ => {\n      const {event, totalTime, hashRate}\n      success.update( _success => {\n        _success = success_\n        return _success\n      })\n      miner.cancel();\n    });\n\n    notemine.mine();\n\n    return () => {\n      progress$.unsubscribe();\n      success$.unsubscribe();\n      miner.cancel();\n    };\n  });\n  $: miners = $progress\n<\/script>\n\n\n<div>\n{#each $miners as miner}\n<span>Miner #{miner.workerId}: {miner.hashRate}kH/s [Best PoW: ${miner.bestPowData}]\n{/each}\n\n{#if($success !== null)}\n  <pre>\n  {$success.event}\n  </pre>\n{/if}\n\n</div>\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"react"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-reactjs",children:"  import React, { useEffect } from 'react';\n  import { Notemine } from '@notemine/wrapper';\n\n  const MyComponent = () => {\n    const notemine = new Notemine({ content: 'Hello, Nostr!' });\n\n    useEffect(() => {\n      const subscription = notemine.progress$.subscribe(progress => {\n        // Update progress bar or display notemine's progress\n      });\n\n      notemine.mine();\n\n      return () => {\n        subscription.unsubscribe();\n        notemine.cancel();\n      };\n    }, []);\n\n    return (\n      <div>\n        {/* Your UI components */}\n      </div>\n    );\n  };\n\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"vue"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-vue",children:"<template>\n  <div>\n    \x3c!-- Your UI components --\x3e\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, onUnmounted } from 'vue';\nimport { Notemine } from '@notemine/wrapper';\n\nexport default defineComponent({\n  name: 'MinerComponent',\n  setup() {\n    const notemine = new Notemine({ content: 'Hello, Nostr!' });\n\n    onMounted(() => {\n      const subscription = notemine.progress$.subscribe(progress => {\n        // Update progress bar or display notemine's progress\n      });\n\n      notemine.mine();\n\n      onUnmounted(() => {\n        subscription.unsubscribe();\n        notemine.cancel();\n      });\n    });\n\n    return {};\n  },\n});\n<\/script>\n\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"angular"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Notemine } from '@notemine/wrapper';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-notemine',\n  templateUrl: './notemine.component.html',\n})\nexport class MinerComponent implements OnInit, OnDestroy {\n  notemine: Notemine;\n  progressSubscription: Subscription;\n\n  ngOnInit() {\n    this.notemine = new Notemine({ content: 'Hello, Nostr!' });\n    this.progressSubscription = this.notemine.progress$.subscribe(progress => {\n      // Update progress bar or display notemine's progress\n    });\n\n    this.notemine.mine();\n  }\n\n  ngOnDestroy() {\n    this.progressSubscription.unsubscribe();\n    this.notemine.cancel();\n  }\n}\n"})})]}),"\n",(0,r.jsx)(e.h2,{id:"build",children:"build"}),"\n",(0,r.jsxs)(e.p,{children:["The wasm is not included in version control, so to build you'll need rust and it's toolchain. That includes ",(0,r.jsx)(e.code,{children:"rustup"})," and ",(0,r.jsx)(e.code,{children:"cargo"})]}),"\n",(0,r.jsx)(e.h3,{id:"install-build-deps",children:"install build deps"}),"\n",(0,r.jsxs)(e.p,{children:["Install ",(0,r.jsx)(e.strong,{children:"wasm-pack"})," with ",(0,r.jsx)(e.code,{children:"cargo install wasm-pack"})]}),"\n",(0,r.jsx)(e.h3,{id:"build-wasm",children:"build wasm"}),"\n",(0,r.jsxs)(e.p,{children:["Build the wasm with ",(0,r.jsx)(e.code,{children:"build:wasm"})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"npm"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  npm build:wasm\n"})}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"pnpm"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  pnpm build:wasm\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"yarn"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  yarn build:wasm\n"})})]}),"\n",(0,r.jsx)(e.h3,{id:"build-package",children:"build package"}),"\n",(0,r.jsxs)(e.p,{children:["Build the package with ",(0,r.jsx)(e.code,{children:"build"}),"\n",(0,r.jsx)(e.strong,{children:"npm"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  npm run build\n"})}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"pnpm"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  pnpm run build\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"yarn"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  yarn build\n"})})]}),"\n",(0,r.jsx)(e.h3,{id:"test",children:"test"}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"npm"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  npm run build\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"pnpm"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  pnpm run build\n"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"yarn"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"  yarn build\n"})})]})]})}function m(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},3023:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>c});var r=s(3696);const i={},t=r.createContext(i);function o(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);